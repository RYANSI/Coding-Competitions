from collections import deque

A, B = map(int, input().split(" "))
N, P = map(int, input().split(" "))
# colors = list(map(int, input().split(" ")))
colors = [int(i) for i in input().split(" ")]

print('actually started')

queue = deque()
queue.append((A, 0, 0))

while len(queue) > 0:
    item = queue.popleft()
    print(item)
    if item[0] == B:
        print(item[2])
        break
    
    for i in range(len(colors)):
        queue.append((item[0] * colors[i] % P, i+1, item[2]+1))
else:
    print(-1)

"""
997 24
500 997
168 453 325 896 219 716 345 377 636 320 230 677 166 220 446 901 749 781 638 905 764 338 829 592 896 898 764 55 582 76 44 595 451 831 673 903 778 524 587 568 84 253 29 78 768 438 895 340 939 459 949 833 872 922 72 323 357 459 472 187 990 125 96 629 306 114 259 547 541 278 461 180 106 156 612 952 824 151 297 326 803 119 82 879 736 910 524 206 793 25 959 376 485 409 331 476 417 346 586 743 29 467 584 357 411 375 796 553 767 238 138 951 779 611 997 471 131 833 800 996 498 960 972 715 68 246 261 724 203 597 359 872 976 329 657 704 628 253 578 566 846 940 476 749 953 623 789 709 25 959 649 695 405 543 879 143 487 431 360 142 20 742 840 705 891 613 973 684 170 239 971 905 911 28 369 408 254 864 319 188 951 197 12 816 306 676 660 860 778 61 301 430 712 340 497 394 645 182 50 127 177 494 476 689 184 210 872 599 420 80 641 149 370 931 321 983 600 224 171 389 655 901 190 82 698 606 219 699 861 308 76 987 218 290 776 153 799 875 179 349 631 317 263 553 694 232 35 900 479 564 233 285 752 181 313 183 143 434 966 267 804 339 203 388 222 792 629 585 849 167 697 888 308 927 305 55 792 807 120 75 164 75 416 708 405 481 849 494 117 746 278 441 546 960 370 539 371 911 89 794 380 972 779 914 394 651 319 167 606 172 410 806 712 701 572 669 811 947 347 715 356 409 75 844 77 241 509 433 533 94 906 648 229 114 19 163 685 99 198 42 755 228 199 418 857 906 460 894 977 6 834 629 90 347 623 222 101 476 833 235 703 907 101 233 423 70 975 135 300 546 724 243 717 592 623 988 259 288 688 851 431 807 177 435 132 238 622 42 844 38 400 740 40 490 561 863 487 557 64 982 994 170 114 20 811 101 164 93 757 293 313 996 923 290 711 605 548 604 398 56 494 842 721 916 34 959 810 853 898 342 436 339 144 474 218 835 540 620 758 645 303 171 722 164 782 21 368 886 247 315 970 704 789 973 704 970 151 886 693 194 246 654 689 393 42 622 449 708 166 95 592 285 744 50 406 242 504 600 600 339 70 72 938 389 390 654 21 820 839 83 746 825 71 175 554 816 575 703 970 665
"""